# the year to which costs should be discounted
param base_year := 2007;

# planning reserve margin - fractional extra load the system must be able able to serve
# when there are no forced outages
param planning_reserve_margin := 0.15;

# discount rate
# a 7% real discount rate was chosen as per the recommendations of the Office of Managment and Budget
# see http://www.whitehouse.gov/omb/rewrite/circulars/a094/a094.html#8 or subsequent revisions
# (inflation is not included in a real discount rate so we're discounting constant year dollars here)
param discount_rate := 0.07;

# Minimum amount of electricity that solar must produce
param min_solar_production := 0.0030;
param enable_min_solar_production := 0;

# required rates of return (real) for generators and transmission lines
param finance_rate := 0.07;
param transmission_finance_rate := 0.07;

# retirement age for transmission lines
param transmission_max_age_years := 20;

# $ cost per mw-km for transmission lines
# because transmission lines are built in one direction only and then 
# constrained to have the same capacity in both directions, this value needs to be half
# of what it would cost to install each line.. $1000 per mw per km / 2
param transmission_cost_per_mw_km := 500;

# forced outage rate for transmission lines, used for probabilistic dispatch(!)
param transmission_forced_outage_rate := 0.01;

# parameters for intra-zone transmission and distribution
# MID has a demand charge of $8.80/kW each month; this works out to $105,600/MW-year
# TODO: find a better source than this (start with E3 2004)
param local_td_annual_payment_per_mw := 100000;
param local_td_max_age_years := 20;

# forced outage rate for hydroelectric dams
# this is used to de-rate the planned power production
# TODO: get a better number for this (0.02 is made up)
param forced_outage_rate_hydro := 0.02;

# round-trip efficiency for storing power via a pumped hydro system
# Black and Veach / NREL ReEDS has this number at 0.87
param pumped_hydro_efficiency := 0.87;

# "carrying cost" for hydro and pumped hydro facilities ($/MWp/year)
# this is calculated as 
#   $1500/kW * 1000 kW/MW * 0.061 (capital recovery factor for a 70-year project at 6% interest)
#   + 13/kW * 1000 kW/MW (fixed O&M per MW)
#   + 3.3/MWh * 8760 * 0.3 h/y (variable O&M and approx. capacity factor for CA hydro projects [0.26 for all projects, 0.35 for simple hydro])
# (this works out to about $43/MWh)
# TODO: calculate hydro costs endogenously 
#   (that will require some neat way of getting hydro plant and cost data into ampl, 
#   maybe via existing_plants.tab; that will also require adding a flag to prevent 
#   the model from trying to dispatch these plants along with the gas and coal ones) 
param hydro_annual_payment_per_mw := 113172;

# Names of intermittent and resource-limited technologies. 
param tech_ccgt := "CCGT";
param tech_gas_combustion_turbine := "Gas_Combustion_Turbine";
param tech_wind := "Wind";
param tech_offshore_wind := "Offshore_Wind";
param tech_biomass_igcc := "Biomass_IGCC";
param tech_bio_gas := "Bio_Gas";
param fuel_hydro := "Water";

# All of the solar technologies. If you change what they are called in the section immediately above, change them here too.
set SOLAR_CSP_TECHNOLOGIES := CSP_Trough_No_Storage CSP_Trough_6h_Storage;
set SOLAR_DIST_PV_TECHNOLOGIES := Residential_PV Commercial_PV;

# default values for projects that don't have a specific location assigned beyond the load area
param location_unspecified := 0;

# cost of carbon emissions ($/tonneCO2)
param carbon_cost;
# Set this to more than one value if you want to run the carbon curve scripty thing
set CARBON_COSTS := {0, 20, 60};

param: 
RESULT_FILES:                        result_file_path_templates    result_header_paths :=
dispatch                              'results/dispatch_%d.txt'     'results/dispatch_columns.txt'
system_load                           'results/system_load_%d.txt'  'results/system_load_columns.txt' 
transmission                          'results/transmission_%d.txt' 'results/transmission_columns.txt' 
generation_capacity                   'results/gen_cap_%d.txt'      'results/gen_cap_columns.txt' 
transmission_capacity                 'results/trans_cap_%d.txt'    'results/trans_cap_columns.txt' 
local_trans_and_distribution_capacity 'results/local_td_cap_%d.txt' 'results/local_td_cap_columns.txt';
